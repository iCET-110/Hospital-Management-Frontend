<div class="page-layout">
    <div class="left-section">
      <div class="card">
        <h2>Patient Reports Details</h2>
        
        <div class="form-group date-section">
          <label>Select Date</label>
          <div class="date-wrapper">
            <input 
              type="date" 
              class="form-control" 
              [(ngModel)]="reportDate"
              placeholder="mm/dd/yyyy">
            <button class="trigger-btn" (click)="toggleSearch()">
              <span class="search-icon">üîç</span>
            </button>
          </div>
        </div>
  
        <div class="search-bar" *ngIf="showSearch">
          <input 
            type="text" 
            class="form-control" 
            [(ngModel)]="searchReportId"
            placeholder="Search by Report ID">
        </div>
  
        <div class="pdf-section">
          <h3>Available Reports {{ reportDate ? 'for ' + (reportDate | date:'mediumDate') : '' }}</h3>
          <div class="pdf-list" [class.empty]="pdfFiles.length === 0">
            <div *ngIf="pdfFiles.length === 0" class="no-records">
              No reports found
            </div>
            <div *ngFor="let file of pdfFiles" class="pdf-item">
              <div class="pdf-checkbox">
                <input type="checkbox" [(ngModel)]="file.selected">
              </div>
              <div class="pdf-info">
                <span class="pdf-name">{{ file.name }}</span>
                <span class="pdf-size">{{ file.size }}</span>
              </div>
              <button 
                class="download-btn" 
                (click)="downloadPdf(file)" 
                [disabled]="!file.url || isDownloading[file.id]"
                [class.downloading]="isDownloading[file.id]"
                title="Download">
                <span class="download-icon" *ngIf="!isDownloading[file.id]">‚¨á</span>
                <span class="loading-icon" *ngIf="isDownloading[file.id]">‚Üª</span>
              </button>
            </div>
          </div>
          
          <div class="file-upload">
            <label class="upload-btn">
              <input 
                type="file" 
                accept=".pdf"
                (change)="handleFileInput($event)"
                style="display: none;">
              Add New Reports
            </label>
          </div>
        </div>
  
        <div class="actions">
          <button class="btn btn-secondary" (click)="resetForm()">Clear</button>
        </div>
      </div>
    </div>
  </div>